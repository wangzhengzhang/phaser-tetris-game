<!DOCTYPE html>
<html>
  <head>
    <base href="/game/tetris/" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 非常重要：在适配手机和电脑的size时自动调整-->
    <meta charset="utf-8" />
    <title>俄罗斯方块</title>
    
  </head>
  <body>
    <link rel="stylesheet" href="page_load.css" />
    <!-- 进度条覆盖层 -->
    <div class="progress-overlay" id="progressOverlay">
      <h2>loading... <span id="progressPercent">0%</span></h2>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="resource-list" id="resourceList"></div>
    </div>
    <div id="mainContent">
      <h1>load resource compete...</h1>
    </div>
    <div id="mainHiddenContent"></div>
  </body>
</html>
<script>
  const jsFiles = [
    // 先加载引擎，再加载业务逻辑
    //"https://s.url.cn/qqun/qun/qqweb/m/qun/confession/js/vconsole.min.js", // 手机浏览器中查看
    "./device_compatibility.js",
    "touch_direction.js",
    "./cdn.tailwindcss.com.js",
    "./tailwind.config.js",
    "./phaser.min.js", // 加载引擎
    "./main.js",
    "./storage_manager.js",
    "./dialog.js",
    "./game.js",

  ];

  const cssFiles = [
    "./font-awesome.min.css",
  ];

  function initApplication() {
    console.log("load resource complate. begin initApplication.");

    // 立即执行的 async 函数
    (async () => {
      console.log("start init application async...");
      const result = await includeHTML("main.html", "mainContent"); // 等待异步操作
      initGame();
      initMain();
      initStorageManager();
      await initDialog(); // 等待异步操作
      //initTouchDirection("gameArea");
      //initClickDirection(window.game.canvas);
      initSceneClickDirection(window.game.scene.keys["TetrisScene"]);
    })();
  }
</script>
<script defer src="./page_load.js"></script>
